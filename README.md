# A Demo of Reliable Distributed System

[![Build Status](https://travis-ci.org/dwyl/esta.svg?branch=master)]()

## Protocol
 
 ### Input
 
Currently support input in client `var=value`, an `id` will be automatically generated by protocol.

### Communication Between Server and Client

#### Request

`val=value` will be packed in the following form

```
client_id#server_id#request_id#var#value
``` 

and then send to server. 

Server will unpack it to `var` and `value` and store it in database.

#### Respond

A Respond will be send from server to client indicating that server has received msg. The respond will look like

```$xslt
client_id#server_id#request_id#data_in_server_database
```

### Communication between LFD and GFD

LFD and GFD are communicate in a similar protocol, where the msg looks like

```$xslt
LFD_id#operation#server_id
```
`operation` could be either `add` or `delete`, indicating the status change of a server from dead to alive or alive to dead.

## Database

Currently a naive `hashmap<String, String>`.

## Local Fault Detector and Global Fault Detector

### LFD (Local Fault Detector)

LFD will keep pinging server to determine whether it is alive. When server is dead, it will report to the GFD that server is no longer available, when server is back online, it will also report to the GFD.

### GFD (Global Fault Detector)

The GFD will maintain a database (currently the a hash set) about the availability of servers. Message from LFD will be handled to determine whether a server is available anymore.

## Active Replication

TBC

### Duplicate Detection

TBC

## Passive Replication

TBC
